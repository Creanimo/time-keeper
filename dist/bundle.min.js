(function(){"use strict";var S=typeof document<"u"?document.currentScript:null;var H=Object.prototype.toString,C=Array.isArray||function(e){return H.call(e)==="[object Array]"};function k(n){return typeof n=="function"}function M(n){return C(n)?"array":typeof n}function x(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function L(n,e){return n!=null&&typeof n=="object"&&e in n}function F(n,e){return n!=null&&typeof n!="object"&&n.hasOwnProperty&&n.hasOwnProperty(e)}var A=RegExp.prototype.test;function _(n,e){return A.call(n,e)}var $=/\S/;function W(n){return!_($,n)}var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function D(n){return String(n).replace(/[&<>"'`=\/]/g,function(t){return q[t]})}var N=/\s*/,K=/\s+/,j=/\s*=/,V=/\s*\}/,z=/#|\^|\/|>|\{|&|=|!/;function G(n,e){if(!n)return[];var t=!1,r=[],s=[],a=[],i=!1,o=!1,l="",u=0;function h(){if(i&&!o)for(;a.length;)delete s[a.pop()];else a=[];i=!1,o=!1}var y,m,O;function B(g){if(typeof g=="string"&&(g=g.split(K,2)),!C(g)||g.length!==2)throw new Error("Invalid tags: "+g);y=new RegExp(x(g[0])+"\\s*"),m=new RegExp("\\s*"+x(g[1])),O=new RegExp("\\s*"+x("}"+g[1]))}B(e||d.tags);for(var c=new T(n),w,f,v,U,P,b;!c.eos();){if(w=c.pos,v=c.scanUntil(y),v)for(var I=0,ne=v.length;I<ne;++I)U=v.charAt(I),W(U)?(a.push(s.length),l+=U):(o=!0,t=!0,l+=" "),s.push(["text",U,w,w+1]),w+=1,U===`
`&&(h(),l="",u=0,t=!1);if(!c.scan(y))break;if(i=!0,f=c.scan(z)||"name",c.scan(N),f==="="?(v=c.scanUntil(j),c.scan(j),c.scanUntil(m)):f==="{"?(v=c.scanUntil(O),c.scan(V),c.scanUntil(m),f="&"):v=c.scanUntil(m),!c.scan(m))throw new Error("Unclosed tag at "+c.pos);if(f==">"?P=[f,v,w,c.pos,l,u,t]:P=[f,v,w,c.pos],u++,s.push(P),f==="#"||f==="^")r.push(P);else if(f==="/"){if(b=r.pop(),!b)throw new Error('Unopened section "'+v+'" at '+w);if(b[1]!==v)throw new Error('Unclosed section "'+b[1]+'" at '+w)}else f==="name"||f==="{"||f==="&"?o=!0:f==="="&&B(v)}if(h(),b=r.pop(),b)throw new Error('Unclosed section "'+b[1]+'" at '+c.pos);return Q(J(s))}function J(n){for(var e=[],t,r,s=0,a=n.length;s<a;++s)t=n[s],t&&(t[0]==="text"&&r&&r[0]==="text"?(r[1]+=t[1],r[3]=t[3]):(e.push(t),r=t));return e}function Q(n){for(var e=[],t=e,r=[],s,a,i=0,o=n.length;i<o;++i)switch(s=n[i],s[0]){case"#":case"^":t.push(s),r.push(s),t=s[4]=[];break;case"/":a=r.pop(),a[5]=s[2],t=r.length>0?r[r.length-1][4]:e;break;default:t.push(s)}return e}function T(n){this.string=n,this.tail=n,this.pos=0}T.prototype.eos=function(){return this.tail===""},T.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},T.prototype.scanUntil=function(e){var t=this.tail.search(e),r;switch(t){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=r.length,r};function E(n,e){this.view=n,this.cache={".":this.view},this.parent=e}E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t=this.cache,r;if(t.hasOwnProperty(e))r=t[e];else{for(var s=this,a,i,o,l=!1;s;){if(e.indexOf(".")>0)for(a=s.view,i=e.split("."),o=0;a!=null&&o<i.length;)o===i.length-1&&(l=L(a,i[o])||F(a,i[o])),a=a[i[o++]];else a=s.view[e],l=L(s.view,e);if(l){r=a;break}s=s.parent}t[e]=r}return k(r)&&(r=r.call(this.view)),r};function p(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}p.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},p.prototype.parse=function(e,t){var r=this.templateCache,s=e+":"+(t||d.tags).join(":"),a=typeof r<"u",i=a?r.get(s):void 0;return i==null&&(i=G(e,t),a&&r.set(s,i)),i},p.prototype.render=function(e,t,r,s){var a=this.getConfigTags(s),i=this.parse(e,a),o=t instanceof E?t:new E(t,void 0);return this.renderTokens(i,o,r,e,s)},p.prototype.renderTokens=function(e,t,r,s,a){for(var i="",o,l,u,h=0,y=e.length;h<y;++h)u=void 0,o=e[h],l=o[0],l==="#"?u=this.renderSection(o,t,r,s,a):l==="^"?u=this.renderInverted(o,t,r,s,a):l===">"?u=this.renderPartial(o,t,r,a):l==="&"?u=this.unescapedValue(o,t):l==="name"?u=this.escapedValue(o,t,a):l==="text"&&(u=this.rawValue(o)),u!==void 0&&(i+=u);return i},p.prototype.renderSection=function(e,t,r,s,a){var i=this,o="",l=t.lookup(e[1]);function u(m){return i.render(m,t,r,a)}if(l){if(C(l))for(var h=0,y=l.length;h<y;++h)o+=this.renderTokens(e[4],t.push(l[h]),r,s,a);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],t.push(l),r,s,a);else if(k(l)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(t.view,s.slice(e[3],e[5]),u),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],t,r,s,a);return o}},p.prototype.renderInverted=function(e,t,r,s,a){var i=t.lookup(e[1]);if(!i||C(i)&&i.length===0)return this.renderTokens(e[4],t,r,s,a)},p.prototype.indentPartial=function(e,t,r){for(var s=t.replace(/[^ \t]/g,""),a=e.split(`
`),i=0;i<a.length;i++)a[i].length&&(i>0||!r)&&(a[i]=s+a[i]);return a.join(`
`)},p.prototype.renderPartial=function(e,t,r,s){if(r){var a=this.getConfigTags(s),i=k(r)?r(e[1]):r[e[1]];if(i!=null){var o=e[6],l=e[5],u=e[4],h=i;l==0&&u&&(h=this.indentPartial(i,u,o));var y=this.parse(h,a);return this.renderTokens(y,t,r,h,s)}}},p.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(r!=null)return r},p.prototype.escapedValue=function(e,t,r){var s=this.getConfigEscape(r)||d.escape,a=t.lookup(e[1]);if(a!=null)return typeof a=="number"&&s===d.escape?String(a):s(a)},p.prototype.rawValue=function(e){return e[1]},p.prototype.getConfigTags=function(e){return C(e)?e:e&&typeof e=="object"?e.tags:void 0},p.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!C(e))return e.escape};var d={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(n){R.templateCache=n},get templateCache(){return R.templateCache}},R=new p;d.clearCache=function(){return R.clearCache()},d.parse=function(e,t){return R.parse(e,t)},d.render=function(e,t,r,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+M(e)+'" was given as the first argument for mustache#render(template, view, partials)');return R.render(e,t,r,s)},d.escape=D,d.Scanner=T,d.Context=E,d.Writer=p;async function X(n){const e=document.createElement("template");return e.innerHTML=n.trim(),e.content.firstChild}const Y=S&&S.tagName.toUpperCase()==="SCRIPT"&&S.src||new URL("bundle.min.js",document.baseURI).href;console.log(Y);class Z{constructor(e,t,r="ui-component"){this.id=e,this.label=t,this.name=r}getRenderProperties(){return{id:this.id,label:this.label,name:this.name}}setTemplatePath(e){this.templatePath=e}async render(e){const t=await this.renderHTML();e.appendChild(t)}async renderHTML(){const e=await this.#e(this.templatePath),t=await this.getRenderProperties(),r=await d.render(e,t);return X(r)}async#e(e){const t=await fetch(e);if(!t.ok)throw new Error(`Failed to load template: ${e}`);return await t.text()}}class ee extends Z{constructor(e,t,r,s="ui-input",a=()=>{},i=()=>{}){super(e,t,s),this.value=r,this.callOnBlur=a,this.callFormCollect=i,this.eventValueUpdate=new Event(`${e}_value-update`)}getRenderProperties(){return{...super.getRenderProperties(),value:this.value}}async render(e){await super.render(e)}async setEventListeners(){const e=document.getElementById(this.id),t=()=>{this.value=e.value,this.callOnBlur(),this.callFormCollect(),console.log("Text UI Component now has value:"+this.value)};e.addEventListener("blur",t)}}class te extends ee{constructor(e,t,r,s="ui-textfield",a=()=>{},i=()=>{}){super(e,t,r,s,a,i),this.setTemplatePath("./src/view/ui-components/strawberry-vanilla-js/input/textfield/ui-textfield.html")}}console.log("Template Base URL: ./src/view/ui-components/strawberry-vanilla-js");const re=new te("3567","frame","");document.addEventListener("DOMContentLoaded",()=>{re.render(document.body)}),console.log("Hello world")})();
